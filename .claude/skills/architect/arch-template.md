# Architecture.md 输出模板

本模板用于生成结构完整的架构设计文档。生成时按照此结构填充内容。

---

## 模板结构

**文件命名**：Architecture.md

---

```markdown
# Architecture - [项目名称]

## 概述
<一段话：技术架构的核心思路、关键技术选型、整体设计原则>

---

## 模块设计

### 模块总览
<模块依赖关系图（文字描述即可）>

| 模块名 | 职责 | 主要文件 | 依赖 |
|--------|------|---------|------|
| <模块1> | <职责描述> | <文件路径> | <依赖哪些模块> |

### [模块名称]

**职责**：<这个模块做什么>

**接口定义**：
| 函数名 | 输入 | 输出 | 说明 |
|--------|------|------|------|
| <函数1> | <参数类型> | <返回类型> | <用途> |

**内部流程**：
<关键逻辑的步骤描述>

**约束**：
- <这个模块的特定约束>

---

## 技术方案

### [功能名称] 技术方案

**需求引用**：Product-Spec.md [对应章节]

**方案选定**：<选定的方案名称>

**方案描述**：
<具体实现方式，详细到 Claude Code 可以直接写代码的程度>

**选型理由**：
- 选这个：<为什么>
- 不选 [备选方案]：<为什么不选>

**实现约束**：
- <约束1：必须xxx>
- <约束2：不允许xxx>

**关键代码模式**（示例）：
```typescript
// 展示关键代码的结构模式，不是完整代码
```

**状态**：✅ 确定 / 🔬 需 POC 验证

---

## 数据流

### [场景名称] 数据流
<从用户输入到最终输出的完整数据流转路径>

```
用户操作 → 组件 → 服务1 → API调用 → 服务2 → 组件更新
```

---

## 质量标准

### [功能名称] 质量标准

| 维度 | 标准 | 检查方法 | 不达标处理 |
|------|------|---------|-----------|
| <维度1> | <具体标准> | <怎么检查> | <重试/降级/报错> |

---

## 约束清单（红线）

以下规则在代码实现时必须遵守，不允许违反：

| 编号 | 约束规则 | 适用范围 | 原因 |
|------|---------|---------|------|
| C01 | <规则描述> | <哪些文件/模块> | <为什么> |

---

## POC 清单（待验证方案）

| 编号 | 验证目标 | 验证方法 | 预期结果 | 状态 |
|------|---------|---------|---------|------|
| POC01 | <要验证什么> | <怎么验证> | <什么结果算通过> | 待验证/已通过/已否决 |

---

## 版本记录

| 版本 | 日期 | 触发来源 | 变更内容 | 影响范围 |
|------|------|---------|---------|---------|
| v1.0 | YYYY-MM-DD | Product-Spec v1.0 | 初始版本 | 全部模块 |
| v1.1 | YYYY-MM-DD | Product-Spec v1.2 (新增XX功能) | 新增XX模块，更新数据流 | 模块A, 任务T-03~T-05 |
```

---

## 写作要点

1. **模块设计**：
   - 每个模块必须有明确的职责边界
   - 接口定义要具体到函数签名级别
   - 标注模块间的依赖关系

2. **技术方案**：
   - 每个功能一个独立的技术方案章节
   - 必须包含"选型理由"和"不选的原因"
   - 实现约束要具体到代码层面
   - 不确定的方案标记为 POC

3. **质量标准**：
   - 必须可验收（不能写"质量好"这种模糊标准）
   - 每个标准都有具体的检查方法
   - 不达标时有明确的处理策略

4. **约束清单**：
   - 编号方便引用
   - 适用范围要具体
   - 这些约束会被同步到 rules/dev-constraints.md

5. **POC 清单**：
   - 不确定就不要硬拍，列为 POC
   - 明确验证方法和预期结果
   - POC 通过后更新为正式方案
